<bn-table #tableComponent [bnData]="data">
  <thead (bnSortChange)="sort($event)">
    <tr>
      <th bnShowSort bnSortKey="name" bnSort="ascend">Estado</th>
      <th bnShowSort bnSortKey="lastname">Quantidade de problemas</th>
      <th>CLientes afetados</th>
      <th>Cidades</th>
    </tr>
  </thead>
  <tbody>
    <ng-template ngFor let-data [ngForOf]="tableComponent.bnData">
      <tr>
        <td>{{ data.estado }}</td>
        <td>{{ data.quantidade_problemas }}</td>
        <td>{{ data.clientes_afetados }}</td>
        <td [bnShowExpand]="data.children" [(bnExpand)]="data.expand">
          {{ data.cidades }}
        </td>
      </tr>
      <tr [bnExpand]="data.expand">
        <td colspan="4">
          <bn-table>
            <thead>
              <tr>
                <th>Cidade</th>
                <th>Quantidade de problemas</th>
                <th>Clientes afetados</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let child of data.children">
                <td>{{ child.cidade }}</td>
                <td>{{ child.quantidade_problemas }}</td>
                <td>{{ child.clientes_afetados }}</td>
              </tr>
            </tbody>
          </bn-table>
        </td>
      </tr>
    </ng-template>
  </tbody>
</bn-table>
